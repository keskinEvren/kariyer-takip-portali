@model IEnumerable<KariyerTakip.Models.InternshipForm>

@{
    ViewData["Title"] = "Index";
}

<p>
    <a asp-action="Create" class="btn btn-primary">Create New</a>
</p>
<div style="overflow-x:auto;">
    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Company)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Industry)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DurationInDays)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Phone)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.WebURLOfCompany)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.EmailOfCompany)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Address)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DoesCompanyWorkOnSaturday)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MentorFullname)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.MentorTitle)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IsApproved)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IsSucessfullyFinished)
            </th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Company)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Industry)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DurationInDays)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Phone)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.WebURLOfCompany)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EmailOfCompany)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Address)
                </td>
                <td>
                    @((bool)item.DoesCompanyWorkOnSaturday ? "Yes" : "No")
                    @* @Html.DisplayFor(modelItem => item.DoesCompanyWorkOnSaturday) *@
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MentorFullname)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MentorTitle)
                </td>
                <td class="text-center">
                    <span class="d-inline-block text-nowrap text-white px-3 py-2 rounded"
                          style="background-color: @((bool)item.IsApproved ? "green" : "red");">
                        @((bool)item.IsApproved ? "Approved" : "Not Approved")
                    </span>
                </td>
                <td class="text-center">
                    <span class="d-inline-block text-nowrap text-white px-3 py-2 rounded"
                          style="background-color: @((bool)item.IsSucessfullyFinished ? "green" : "red");">
                        @((bool)item.IsSucessfullyFinished ? "Finished" : "Not Finished")
                    </span>
                </td>
                <td>
                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-warning btn-sm">Edit</a>
                    <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-info btn-sm">Details</a>
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>
<script>
    // Function to filter the table based on the search input
    function searchTable() {
        var input = document.getElementById("searchInput");
        var filter = input.value.toLowerCase();
        var table = document.getElementById("internshipTable");
        var rows = table.getElementsByTagName("tr");

        // Loop through all rows in the table and hide those that don't match the search term
        for (var i = 1; i < rows.length; i++) {
            var cells = rows[i].getElementsByTagName("td");
            var found = false;

            // Check if the cell content in any column matches the search term
            for (var j = 0; j < cells.length; j++) {
                if (cells[j]) {
                    var text = cells[j].textContent || cells[j].innerText;
                    if (text.toLowerCase().indexOf(filter) > -1) {
                        found = true;
                        break;
                    }
                }
            }

            if (found) {
                rows[i].style.display = "";
            } else {
                rows[i].style.display = "none";
            }
        }
    }
</script>